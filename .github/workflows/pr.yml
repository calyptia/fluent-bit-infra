on:
  pull_request:
    branches:
      - main
  workflow_dispatch:

name: Tests for pull requests
jobs:
  run-tests:
    uses: calyptia/fluent-bit-infra/.github/workflows/call-common.yaml@main
    with:
      ignore_errors: false
    secrets:
      gcp_sa_key: ${{ secrets.GCP_SA_KEY }}
      terraform_cloud_api_token: ${{ secrets.TF_API_TOKEN }}
      cloudflare_token: ${{ secrets.CLOUDFLARE_TOKEN }}
      packet_net_token: ${{ secrets.PACKET_NET_TOKEN }}
      github_personal_access_token: ${{ secrets.GH_PA_TOKEN }}
      github_owner: ${{ secrets.GH_PA_OWNER }}
